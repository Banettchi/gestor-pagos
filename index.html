<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a472a">
    <meta name="description" content="Sistema de gestiÃ³n de pagos y almacenamiento">
    <title>Song & Beer</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">

        <!-- ========== PANTALLA DE INICIO ========== -->
        <section id="homeScreen" class="screen active">
            <div class="home-container">
                <img src="logo-sb.png" alt="Song & Beer" class="home-logo">
                <h1 class="home-title">GestiÃ³n del Local</h1>
                <div class="home-buttons">
                    <button class="home-btn" onclick="showScreen('storage')">
                        <span class="home-btn-icon">ğŸ“¦</span>
                        <span class="home-btn-text">Almacenamiento</span>
                        <span class="home-btn-sub">Inventario de productos</span>
                    </button>
                    <button class="home-btn" onclick="showScreen('payments')">
                        <span class="home-btn-icon">ğŸ’°</span>
                        <span class="home-btn-text">Gestor Pagos</span>
                        <span class="home-btn-sub">Servicios mensuales</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- ========== MÃ“DULO DE ALMACENAMIENTO ========== -->
        <section id="storageScreen" class="screen">
            <header class="header">
                <button class="btn-back" onclick="showScreen('home')">â†</button>
                <h1>ğŸ“¦ Almacenamiento</h1>
                <div class="header-actions">
                    <button class="btn btn-icon" onclick="showHistoryModal()">ğŸ“‹</button>
                    <button class="btn btn-primary" onclick="openAddProductModal()">+ Agregar</button>
                </div>
            </header>

            <!-- Tabs de ubicaciÃ³n -->
            <nav class="tabs">
                <button class="tab active" data-storage-tab="nevera" onclick="switchStorageTab('nevera')">ğŸ§Š
                    Nevera</button>
                <button class="tab" data-storage-tab="bodega" onclick="switchStorageTab('bodega')">ğŸ“¦ Bodega</button>
            </nav>

            <!-- Lista de productos -->
            <main class="products-list" id="productsList">
                <!-- Productos se cargan dinÃ¡micamente -->
            </main>

            <!-- Mensaje vacÃ­o -->
            <div class="empty-state" id="emptyProducts" style="display: none;">
                <span class="empty-icon">ğŸ“¦</span>
                <p>No hay productos en esta ubicaciÃ³n</p>
            </div>

            <!-- FAB -->
            <button class="fab" onclick="openAddProductModal()">+</button>
        </section>

        <!-- ========== MÃ“DULO DE PAGOS ========== -->
        <section id="paymentsScreen" class="screen">
            <header class="header">
                <button class="btn-back" onclick="showScreen('home')">â†</button>
                <h1>ğŸ’° Gestor de Pagos</h1>
                <div class="header-actions">
                    <button id="btnNotifications" class="btn btn-icon" title="Activar notificaciones">ğŸ””</button>
                    <button id="btnAdd" class="btn btn-primary">+ Agregar</button>
                </div>
            </header>

            <!-- Tabs -->
            <nav class="tabs">
                <button class="tab active" data-tab="pending">Pendientes</button>
                <button class="tab" data-tab="paid">Pagados</button>
                <button class="tab" data-tab="all">Todos</button>
            </nav>

            <!-- Lista de servicios -->
            <main class="services-list" id="servicesList">
            </main>

            <!-- Mensaje vacÃ­o -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <span class="empty-icon">ğŸ“‹</span>
                <p>No hay servicios registrados</p>
                <button class="btn btn-primary" onclick="openAddModal()">Agregar servicio</button>
            </div>

            <!-- FAB para agregar -->
            <button class="fab" id="fabAdd" onclick="openAddModal()">+</button>
        </section>
    </div>

    <!-- ========== MODALES DE PAGOS ========== -->
    <!-- Modal Agregar/Editar Servicio -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Agregar Servicio</h2>
                <button class="btn-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="serviceForm">
                <input type="hidden" id="serviceId">

                <div class="form-group">
                    <label>Tipo de servicio</label>
                    <select id="serviceType" required onchange="toggleCustomFields()">
                        <option value="luz">ğŸ’¡ Luz</option>
                        <option value="agua">ğŸ’§ Agua</option>
                        <option value="admin">ğŸ¢ AdministraciÃ³n</option>
                        <option value="cuota">ğŸ  Cuota Local</option>
                        <option value="bodega">ğŸ“¦ Bodega</option>
                        <option value="directv">ğŸ“º DirecTV</option>
                        <option value="internet">ğŸŒ Internet</option>
                        <option value="telefono">ğŸ“± TelÃ©fono</option>
                        <option value="etb">ğŸ“ ETB</option>
                        <option value="sayco">ğŸµ Sayco</option>
                        <option value="otro">ğŸ”§ Otro (personalizado)</option>
                    </select>
                </div>

                <div id="customFields" class="form-group" style="display: none;">
                    <label>Nombre del servicio</label>
                    <input type="text" id="customName" placeholder="Ej: ETB, Netflix, Gym...">
                    <label style="margin-top: 10px;">Emoji (opcional)</label>
                    <input type="text" id="customEmoji" placeholder="ğŸ“" maxlength="2">
                    <small>Deja vacÃ­o para usar ğŸ”§</small>
                </div>

                <div class="form-group">
                    <label>Monto mensual ($)</label>
                    <input type="number" id="amount" placeholder="100000" required>
                </div>

                <div class="form-group">
                    <label>DÃ­a de vencimiento (1-31)</label>
                    <input type="number" id="dueDay" min="1" max="31" placeholder="15" required>
                    <small>El servicio vence este dÃ­a de cada mes</small>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="alreadyPaid">
                        <span>Ya paguÃ© este mes</span>
                    </label>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Confirmar Pago -->
    <div class="modal" id="payModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Registrar Pago</h2>
                <button class="btn-close" onclick="closePayModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p id="payServiceName"></p>
                <div class="form-group">
                    <label>Monto pagado ($)</label>
                    <input type="number" id="payAmount" placeholder="100000">
                </div>
            </div>
            <div class="form-actions">
                <button class="btn btn-secondary" onclick="closePayModal()">Cancelar</button>
                <button class="btn btn-success" onclick="confirmPay()">âœ“ Confirmar Pago</button>
            </div>
        </div>
    </div>

    <!-- ========== MODALES DE ALMACENAMIENTO ========== -->
    <!-- Modal Agregar Producto -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="productModalTitle">Agregar Producto</h2>
                <button class="btn-close" onclick="closeProductModal()">&times;</button>
            </div>
            <form id="productForm" onsubmit="saveProduct(event)">
                <input type="hidden" id="productId">

                <div class="form-group">
                    <label>Nombre del producto</label>
                    <input type="text" id="productName" placeholder="Ej: Corona, Coca Cola..." required>
                </div>

                <div class="form-group">
                    <label>UbicaciÃ³n</label>
                    <select id="productLocation" required>
                        <option value="nevera">ğŸ§Š Nevera</option>
                        <option value="bodega">ğŸ“¦ Bodega</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Cantidad inicial</label>
                    <input type="number" id="productQty" min="0" placeholder="0" required>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeProductModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Mover Producto -->
    <div class="modal" id="moveProductModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Mover Producto</h2>
                <button class="btn-close" onclick="closeMoveModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p id="moveProductName" style="font-size: 1.2em; margin-bottom: 15px;"></p>
                <div class="form-group">
                    <label>Cantidad a mover</label>
                    <input type="number" id="moveQty" min="1" placeholder="1">
                </div>
                <div class="form-group">
                    <label>Destino</label>
                    <select id="moveDestination">
                        <option value="nevera">ğŸ§Š Nevera</option>
                        <option value="bodega">ğŸ“¦ Bodega</option>
                    </select>
                </div>
            </div>
            <div class="form-actions">
                <button class="btn btn-secondary" onclick="closeMoveModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="confirmMove()">ğŸ“¦ Mover</button>
            </div>
        </div>
    </div>

    <!-- Modal Historial -->
    <div class="modal" id="historyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“‹ Historial de Movimientos</h2>
                <button class="btn-close" onclick="closeHistoryModal()">&times;</button>
            </div>
            <div class="modal-body" id="historyList" style="max-height: 400px; overflow-y: auto;">
                <!-- Historial se carga dinÃ¡micamente -->
            </div>
        </div>
    </div>

    <!-- Toast notification -->
    <div class="toast" id="toast"></div>

    <script src="app.js"></script>
</body>

</html>